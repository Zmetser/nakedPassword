/*
---

name: NakedPassword

description: Visualize password strength with a stripping man or women.

license: Dual licensed under the MIT or GPL Version 2 licenses.

authors:
  - Kovács Olivér

version: 0.3.0

requires:
  - Core/Class.Extras
  - Core/Element.Event
  - Core/Element.Style
  - Core/Element.Dimensions
  - Core/Fx.Tween
  - More/Element.Position
  - More/Element.Measure
  - More/Assets

provides: [nakedPassword]

...
*/
!function(){var t=new Class({Implements:[Options,Events],options:{path:"images/",sex:"female",resize:!0,imgClass:"nakedPasswdImage",imgSize:{width:30,height:28}},toElement:function(){return this.element},initialize:function(t,i){return this.setOptions(i),this.o=this.options,this.element=document.id(t),this.bound=this.trigger.bind(this),this.imageSrc=this.o.path+this.o.sex+".png",this.build().attach(),this.$el=$(document.createElement("span")),this.$el.setStyle("display","block"),this},attach:function(){return $(this).addEvents({keyup:this.bound,blur:this.bound}),this},trigger:function(t){return this.strength=this._getPasswordStrength(t.target.value),this.update(),this},build:function(){console.log(this.imageSrc);new Asset.image(this.imageSrc,{"class":this.o.imgClass,styles:{opacity:0,visibility:"hidden"},onLoad:function(){this.imageWidth=this.o.imgSize.width,this.imageHeight=this.o.imgSize.height,this.o.resize&&(this.imageHeight=$(this).getComputedSize().height,ratio=this.imageHeight/this.o.imgSize.height,this.imageWidth=parseInt(this.o.imgSize.width*ratio,10),this.$el.setStyle("backgroundSize",this.imageWidth+"px "+5*this.imageHeight+"px")),this.$el.setStyles({width:this.imageWidth,height:this.imageHeight,backgroundImage:"url("+this.imageSrc+")",backgroundRepeat:"no-repeat"}),this.$el.inject($(this),"after"),this.$el.position({relativeTo:$(this),position:"centerRight",edge:"centerRight",offset:{x:-10}})}.bind(this)});return this},update:function(){return this.$el.setStyle("backgroundPosition","0 "+-(this.strength*this.imageHeight)+"px"),this.$el.fade("in"),this},_getPasswordStrength:function(t){return 0+ +(t.length>5)+ +(/[a-z]/.test(t)&&/[A-Z]/.test(t))+ +(/\d/.test(t)&&/\D/.test(t))+ +(/[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/.test(t)&&/\w/.test(t))+ +(t.length>12)}});Element.implement({nakedPassword:function(i){return this.store("nakedpass",new t(this,i))}})}();